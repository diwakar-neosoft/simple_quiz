<%= form_with(model: admin_question, html: {class: 'mx-auto', style: 'max-width: 450px;'}) do |form| %>
  <% if admin_question.errors.any? %>
    <div style="color: red">
      <h2><%= pluralize(admin_question.errors.count, "error") %> prohibited this question from being saved:</h2>

      <ul>
        <% admin_question.errors.each do |error| %>
          <li><%= error.full_message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div class='row form-label-group mb-4'>
    <%= form.label :title, 'Title ',class: 'col-2' %>
    <div class='col-10'>
      <%= form.text_field :title, class: 'form-control' %>
    </div>
  </div>

  <div class='row form-label-group mb-4'>
    <%= form.label :inputType, 'Input Type ',class: 'col-2' %>
    <div class='col-10'>
      <%= form.select :inputType, input_type_options, {}, :include_blank => 'Select Question Type', class: 'form-control' %>
    </div>
  </div>

  <div class='hidden' id='optionBlock'>
    <div class='form-group mb-3 row'>
      <%= form.label :option1, 'option1 ',class: 'col-2' %>
      <div class='col-10'>
        <%= form.text_field :option1, class: 'form-control' %>
      </div>
    </div>

    <div class='form-group mb-3 row'>
      <%= form.label :option2, 'option2 ',class: 'col-2' %>
      <div class='col-10'>
        <%= form.text_field :option2, class: 'form-control' %>
      </div>
    </div>

    <div class='form-group mb-3 row'>
      <%= form.label :option3, 'option3 ',class: 'col-2' %>
      <div class='col-10'>
        <%= form.text_field :option3, class: 'form-control' %>
      </div>
    </div>

    <div class='form-group mb-3 row'>
      <%= form.label :option4, 'option4 ',class: 'col-2' %>
      <div class='col-10'>
        <%= form.text_field :option4, class: 'form-control' %>
      </div>
    </div>
  </div>

  
  <div class='form-group mb-3 row'>
    <%= form.label :subject_id,'SubjectId ',class: 'col-2' %>
    <div class='col-10'>
      <%= form.select :subject_id, all_subjects, {}, class: 'form-control' %>
    </div>
  </div>

  <div class='form-group mt-5 row'>
    <div class='col-12'>
      <%= form.submit 'Submit',class: 'btn btn-primary btn-block' %>
    </div>
  </div>
<% end %>

<script type="text/javascript">
var place = {
  "true/false" : "true/false",
  "multipleChoice": "select from option",
  "list": "select from option"
}
  function fieldCondition(inputType){
    $('#admin_question_answer').attr("placeholder", place[inputType]);
    let removeClassHidden = (id) => $(`#${id}`).removeClass("hidden");
    let addClassHidden = (id) => $(`#${id}`).addClass("hidden");

    if (inputType === 'multipleChoice' || inputType === 'list'){
      removeClassHidden('optionBlock');
    }
    else{
      addClassHidden('optionBlock');
    }
  }
  var setField = function() {
    const inputType = $(this).val();
    fieldCondition(inputType)
  }
  $( document ).ready(function() {
    const inputType = $('#admin_question_inputType')[0].value;
    fieldCondition(inputType);
  });
  $('#admin_question_inputType').change(setField);
</script>
